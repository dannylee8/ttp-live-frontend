{"ast":null,"code":"import _defineProperty from\"/Users/dannylee/git/ttp-live/ttp-live-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/dannylee/git/ttp-live/ttp-live-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/dannylee/git/ttp-live/ttp-live-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/dannylee/git/ttp-live/ttp-live-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/dannylee/git/ttp-live/ttp-live-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/dannylee/git/ttp-live/ttp-live-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import axios from'axios';import{Link}from'react-router-dom';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);function Login(props){var _this;_classCallCheck(this,Login);_this=_possibleConstructorReturn(this,_getPrototypeOf(Login).call(this,props));_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.handleSubmit=function(event){event.preventDefault();var _this$state=_this.state,email=_this$state.email,password=_this$state.password;var user={email:email,password:password};axios.post('https://ttp-live-backend.herokuapp.com/login',{user:user},{withCredentials:true}).then(function(response){if(response.data.logged_in){_this.props.handleLogin(response.data);_this.redirect();}else{_this.setState({errors:response.data.errors,email:'',password:''});}}).catch(function(error){return console.log('api errors:',error);});};_this.redirect=function(){_this.props.history.push('/');};_this.handleErrors=function(){return React.createElement(\"div\",null,React.createElement(\"ul\",{className:\"error-message\"},_this.state.errors.map(function(error){return React.createElement(\"li\",{key:error},error);})));};_this.state={email:'',password:'',errors:''};return _this;}_createClass(Login,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){return this.props.loggedInStatus?this.redirect():null;}},{key:\"render\",value:function render(){var _this$state2=this.state,email=_this$state2.email,password=_this$state2.password;return React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"top-menu\"},React.createElement(\"span\",{className:\"logo\"},\"TTP Stock Trade\")),React.createElement(\"div\",{className:\"center\"},React.createElement(\"div\",{id:\"login_div\"},React.createElement(\"h4\",null,\"Sign In\"),React.createElement(\"form\",{className:\"w3-container\",onSubmit:this.handleSubmit},React.createElement(\"input\",{placeholder:\"email\",className:\"w3-input w3-border w3-light-grey\",type:\"text\",name:\"email\",value:email,onChange:this.handleChange}),React.createElement(\"br\",null),React.createElement(\"input\",{placeholder:\"password\",className:\"w3-input w3-border w3-light-grey\",type:\"password\",name:\"password\",value:password,onChange:this.handleChange}),React.createElement(\"button\",{className:\"w3-btn w3-round-large w3-blue-grey\",placeholder:\"submit\",type:\"submit\"},\"Log In\"),React.createElement(\"div\",null,\"or \",React.createElement(Link,{to:\"/signup\"},\"register\")))),React.createElement(\"div\",{className:\"error-box\"},this.state.errors?this.handleErrors():null)));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/Users/dannylee/git/ttp-live/ttp-live-frontend/src/components/registrations/Login.js"],"names":["React","Component","axios","Link","Login","props","handleChange","event","target","name","value","setState","handleSubmit","preventDefault","state","email","password","user","post","withCredentials","then","response","data","logged_in","handleLogin","redirect","errors","catch","error","console","log","history","push","handleErrors","map","loggedInStatus"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios'\nimport { Link } from 'react-router-dom'\n\nclass Login extends Component {\n  constructor (props) {\n    super(props);\n    this.state = { \n      email: '',\n      password: '',\n      errors: ''\n    };\n  }\n\n  componentDidUpdate() {\n    return this.props.loggedInStatus ? this.redirect() : null\n  }\n\n  handleChange = (event) => {\n    const {name, value} = event.target\n    this.setState({\n      [name]: value\n    })\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault()\n    const {email, password} = this.state\n    let user = {\n      email: email,\n      password: password\n    }\n    axios.post('https://ttp-live-backend.herokuapp.com/login', {user}, {withCredentials: true})\n    .then(response => {\n      if (response.data.logged_in) {\n        this.props.handleLogin(response.data)\n        this.redirect()\n      } else {\n        this.setState({\n          errors: response.data.errors,\n          email: '',\n          password: ''\n        })\n      }\n    })\n    .catch(error => console.log('api errors:', error))\n  };\n\n  redirect = () => {\n    this.props.history.push('/')\n  }\n\n  handleErrors = () => {\n    return (\n      <div>\n        <ul className='error-message'>\n        {this.state.errors.map(error => {\n        return <li key={error}>{error}</li>\n          })\n        }\n        </ul>\n      </div>\n    )\n  }\n\n  render() {\n    const {email, password} = this.state\n    return (\n      <>\n        <div className='top-menu'>\n          <span className='logo'>TTP Stock Trade</span>\n        </div>\n        <div className='center' >\n          <div id=\"login_div\">\n            <h4>Sign In</h4>\n            <form className=\"w3-container\" onSubmit={this.handleSubmit}>\n              <input\n                placeholder=\"email\"\n                className=\"w3-input w3-border w3-light-grey\"\n                type=\"text\"\n                name=\"email\"\n                value={email}\n                onChange={this.handleChange}\n              />\n              <br></br>\n                <input\n                  placeholder=\"password\"\n                  className=\"w3-input w3-border w3-light-grey\"\n                  type=\"password\"\n                  name=\"password\"\n                  value={password}\n                  onChange={this.handleChange}\n                />\n                <button className=\"w3-btn w3-round-large w3-blue-grey\" placeholder=\"submit\" type=\"submit\">\n                  Log In\n                </button>\n              <div>\n                or <Link to='/signup'>register</Link>\n              </div>\n              </form>\n            </div>\n            <div className='error-box'>\n            {\n              this.state.errors ? this.handleErrors() : null\n            }\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}