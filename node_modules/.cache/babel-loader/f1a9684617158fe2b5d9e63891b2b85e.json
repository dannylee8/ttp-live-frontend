{"ast":null,"code":"var _jsxFileName = \"/Users/dannylee/git/ttp/ttp-frontend/src/components/registrations/Login.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const {\n        email,\n        password\n      } = this.state;\n      let user = {\n        email: email,\n        password: password\n      };\n      axios.post('http://localhost:3001/login', {\n        user\n      }, {\n        withCredentials: true\n      }).then(response => {\n        if (response.data.logged_in) {\n          this.props.handleLogin(response.data);\n          this.redirect();\n        } else {\n          this.setState({\n            errors: response.data.errors,\n            email: '',\n            password: ''\n          });\n        }\n      }).catch(error => console.log('api errors:', error));\n    };\n\n    this.redirect = () => {\n      this.props.history.push('/');\n    };\n\n    this.handleErrors = () => {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"error-message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, this.state.errors.map(error => {\n        return React.createElement(\"li\", {\n          key: error,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, error);\n      })));\n    };\n\n    this.state = {\n      email: '',\n      password: '',\n      errors: ''\n    };\n  }\n\n  componentDidUpdate() {\n    return this.props.loggedInStatus ? this.redirect() : null;\n  }\n\n  render() {\n    const {\n      email,\n      password\n    } = this.state;\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"top-menu\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"TTP Stock Trade\")), React.createElement(\"div\", {\n      className: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"login_div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Sign In\"), React.createElement(\"form\", {\n      className: \"w3-container\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      placeholder: \"email\",\n      className: \"w3-input w3-border w3-light-grey\",\n      type: \"text\",\n      name: \"email\",\n      value: email,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      placeholder: \"password\",\n      className: \"w3-input w3-border w3-light-grey\",\n      type: \"password\",\n      name: \"password\",\n      value: password,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"w3-btn w3-round-large w3-blue-grey\",\n      placeholder: \"submit\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Log In\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"or \", React.createElement(Link, {\n      to: \"/signup\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"register\")))), React.createElement(\"div\", {\n      className: \"error-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, this.state.errors ? this.handleErrors() : null)));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/dannylee/git/ttp/ttp-frontend/src/components/registrations/Login.js"],"names":["React","Component","axios","Link","Login","constructor","props","handleChange","event","name","value","target","setState","handleSubmit","preventDefault","email","password","state","user","post","withCredentials","then","response","data","logged_in","handleLogin","redirect","errors","catch","error","console","log","history","push","handleErrors","map","componentDidUpdate","loggedInStatus","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios'\nimport { Link } from 'react-router-dom'\n\nclass Login extends Component {\n  constructor (props) {\n    super(props);\n    this.state = { \n      email: '',\n      password: '',\n      errors: ''\n    };\n  }\n\n  componentDidUpdate() {\n    return this.props.loggedInStatus ? this.redirect() : null\n  }\n\n  handleChange = (event) => {\n    const {name, value} = event.target\n    this.setState({\n      [name]: value\n    })\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault()\n    const {email, password} = this.state\n    let user = {\n      email: email,\n      password: password\n    }\n    axios.post('http://localhost:3001/login', {user}, {withCredentials: true})\n    .then(response => {\n      if (response.data.logged_in) {\n        this.props.handleLogin(response.data)\n        this.redirect()\n      } else {\n        this.setState({\n          errors: response.data.errors,\n          email: '',\n          password: ''\n        })\n      }\n    })\n    .catch(error => console.log('api errors:', error))\n  };\n\n  redirect = () => {\n    this.props.history.push('/')\n  }\n\n  handleErrors = () => {\n    return (\n      <div>\n        <ul className='error-message'>\n        {this.state.errors.map(error => {\n        return <li key={error}>{error}</li>\n          })\n        }\n        </ul>\n      </div>\n    )\n  }\n\n  render() {\n    const {email, password} = this.state\n    return (\n      <>\n        <div className='top-menu'>\n          <span className='logo'>TTP Stock Trade</span>\n        </div>\n        <div className='center' >\n          <div id=\"login_div\">\n            <h4>Sign In</h4>\n            <form className=\"w3-container\" onSubmit={this.handleSubmit}>\n              <input\n                placeholder=\"email\"\n                className=\"w3-input w3-border w3-light-grey\"\n                type=\"text\"\n                name=\"email\"\n                value={email}\n                onChange={this.handleChange}\n              />\n              <br></br>\n                <input\n                  placeholder=\"password\"\n                  className=\"w3-input w3-border w3-light-grey\"\n                  type=\"password\"\n                  name=\"password\"\n                  value={password}\n                  onChange={this.handleChange}\n                />\n                <button className=\"w3-btn w3-round-large w3-blue-grey\" placeholder=\"submit\" type=\"submit\">\n                  Log In\n                </button>\n              <div>\n                or <Link to='/signup'>register</Link>\n              </div>\n              </form>\n            </div>\n            <div className='error-box'>\n            {\n              this.state.errors ? this.handleErrors() : null\n            }\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}