(this.webpackJsonpttp_frontend=this.webpackJsonpttp_frontend||[]).push([[0],{34:function(e,t,a){e.exports=a(61)},61:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(31),l=a.n(o),s=a(5),c=a(6),i=a(8),u=a(7),m=a(9),d=a(11),h=a.n(d),p=a(12),g=a(13);var b=function(e){var t=function(t){e.setMode(t.target.innerHTML.toLowerCase())};return r.a.createElement("div",{className:"w3-bar top-menu"},r.a.createElement("span",{className:"logo"},"TTP Stock Trade"),e.loggedInStatus?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.b,{to:"/logout",onClick:function(){h.a.delete("http://localhost:3001/logout",{withCredentials:!0}).then((function(t){e.handleLogout(),e.history.push("/login")})).catch((function(e){return console.log(e)}))}},r.a.createElement("button",{className:"w3-bar-item w3-button w3-pale-blue w3-right w3-hover-pale-red"},r.a.createElement("span",{className:"glyphicon glyphicon-log-out"})," Log Out")),r.a.createElement("button",{onClick:t,className:"w3-bar-item w3-button w3-light-grey w3-right w3-hover-pale-red"},"Portfolio"),r.a.createElement("button",{onClick:t,className:"w3-bar-item w3-button w3-sand w3-right w3-hover-pale-red"},"Transactions")):null)},E=a(18);var f=function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.symbol),r.a.createElement("td",null,e.shares," shares"),r.a.createElement("td",null,"$ ",E((e.shares*e.price).toFixed(2))))};var w=function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,"BUY (",e.symbol,")"),r.a.createElement("td",null,e.shares," shares @ $",parseFloat(e.price).toFixed(2)))},v=a(18);var y=function(e){return r.a.createElement("div",{className:"column left"},console.log(e),r.a.createElement("br",null),r.a.createElement("br",null),"portfolio"===e.modeStatus?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Portfolio"),r.a.createElement("h4",null,"Current value: $",v(e.portfolioCurrentValue.toFixed(2))),r.a.createElement("h4",null,"Portfolio Cost: $",v(e.portfolioCost)),r.a.createElement("table",{id:"stocks"},r.a.createElement("tbody",null,e.stocks.map((function(e){return r.a.createElement(f,{key:e.id,symbol:e.symbol,shares:e.shares,price:e.current_price})}))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Transactions"),r.a.createElement("table",{id:"stocks"},r.a.createElement("tbody",null,e.stocks.map((function(e){return r.a.createElement(w,{key:e.id,symbol:e.symbol,shares:e.shares,price:e.price})}))))))},S=a(15),j=a(18),C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(S.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.ticker,r=t.quantity;console.log(n,r)},a.state={ticker:"",quantity:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.ticker,a=e.quantity;return(r.a.createElement("div",{className:"column ".concat("portfolio"===this.props.modeStatus?"right":"")},"portfolio"===this.props.modeStatus?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cash-balance"},"Cash Balance: $ ",this.props.userobj?"".concat(j(parseFloat(this.props.userobj.cash).toFixed(2))):null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("form",{className:"w3-container stock-form",onSubmit:this.handleSubmit},r.a.createElement("input",{placeholder:"Ticker symbol",className:"w3-input w3-border w3-light-grey",type:"text",name:"ticker",value:t,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("input",{placeholder:"Quantity",className:"w3-input w3-border w3-light-grey",type:"text",name:"quantity",value:a,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("button",{className:"w3-btn w3-round-large w3-blue-grey",placeholder:"submit",type:"submit"},"Buy")))):null))}}]),t}(n.Component),k=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).redirect=function(){a.props.history.push("/login")},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){return this.props.loggedInStatus?null:this.redirect()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(b,Object.assign({},this.props,{setMode:this.props.setMode,loggedInStatus:this.props.loggedInStatus})),this.props.loggedInStatus?r.a.createElement("div",{className:"row"},r.a.createElement(y,Object.assign({},this.props,{userobj:this.props.userobj,modeStatus:this.props.modeStatus})),r.a.createElement(C,Object.assign({},this.props,{userobj:this.props.userobj,modeStatus:this.props.modeStatus}))):null)}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(S.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n={email:t.email,password:t.password};h.a.post("http://localhost:3001/login",{user:n},{withCredentials:!0}).then((function(e){e.data.logged_in?(a.props.handleLogin(e.data),a.redirect()):a.setState({errors:e.data.errors,email:"",password:""})})).catch((function(e){return console.log("api errors:",e)}))},a.redirect=function(){a.props.history.push("/")},a.handleErrors=function(){return r.a.createElement("div",null,r.a.createElement("ul",{className:"error-message"},a.state.errors.map((function(e){return r.a.createElement("li",{key:e},e)}))))},a.state={email:"",password:"",errors:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){return this.props.loggedInStatus?this.redirect():null}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"top-menu"},r.a.createElement("span",{className:"logo"},"TTP Stock Trade")),r.a.createElement("div",{className:"center"},r.a.createElement("div",{id:"login_div"},r.a.createElement("h4",null,"Sign In"),r.a.createElement("form",{className:"w3-container",onSubmit:this.handleSubmit},r.a.createElement("input",{placeholder:"email",className:"w3-input w3-border w3-light-grey",type:"text",name:"email",value:t,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("input",{placeholder:"password",className:"w3-input w3-border w3-light-grey",type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("button",{className:"w3-btn w3-round-large w3-blue-grey",placeholder:"submit",type:"submit"},"Log In"),r.a.createElement("div",null,"or ",r.a.createElement(p.b,{to:"/signup"},"register")))),r.a.createElement("div",{className:"error-box"},this.state.errors?this.handleErrors():null)))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(S.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n={username:t.username,email:t.email,password:t.password,password_confirmation:t.password_confirmation,cash:5e3};h.a.post("http://localhost:3001/users",{user:n},{withCredentials:!0}).then((function(e){"created"===e.data.status?(a.props.handleLogin(e.data),a.redirect()):a.setState({errors:e.data.errors,username:"",email:"",password:"",password_confirmation:""})})).catch((function(e){return console.log("api errors:",e)}))},a.redirect=function(){a.props.history.push("/")},a.handleErrors=function(){return r.a.createElement("div",null,r.a.createElement("ul",{className:"error-message"},a.state.errors.map((function(e){return r.a.createElement("li",{key:e},e)}))))},a.state={username:"",email:"",password:"",password_confirmation:"",errors:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){return this.props.loggedInStatus?this.redirect():null}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.password,o=e.password_confirmation;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"top-menu"},r.a.createElement("span",{className:"logo"},"TTP Stock Trade")),r.a.createElement("div",{className:"center"},r.a.createElement("div",{id:"login_div"},r.a.createElement("h4",null,"Register"),r.a.createElement("form",{className:"w3-container",onSubmit:this.handleSubmit},r.a.createElement("input",{placeholder:"username",className:"w3-input w3-border w3-light-grey",type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("input",{placeholder:"email",className:"w3-input w3-border w3-light-grey",type:"text",name:"email",value:a,onChange:this.handleChange}),r.a.createElement("input",{placeholder:"password",className:"w3-input w3-border w3-light-grey",type:"password",name:"password",value:n,onChange:this.handleChange}),r.a.createElement("input",{placeholder:"password confirmation",className:"w3-input w3-border w3-light-grey",type:"password",name:"password_confirmation",value:o,onChange:this.handleChange}),r.a.createElement("button",{className:"w3-btn w3-round-large w3-blue-grey",placeholder:"submit",type:"submit"},"Sign Up"),r.a.createElement("div",null,"or ",r.a.createElement(p.b,{to:"/login"},"login"))),r.a.createElement("br",null)),r.a.createElement("div",{className:"error-box"},this.state.errors?this.handleErrors():null)))}}]),t}(n.Component),L=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).setMode=function(e){a.setState({mode:e})},a.loginStatus=function(){h.a.get("http://localhost:3001/logged_in",{withCredentials:!0}).then((function(e){e.data.logged_in?a.handleLogin(e):a.handleLogout()})).catch((function(e){console.log("api errors:",e)}))},a.handleLogin=function(e){a.setState((function(t,a){return{isLoggedIn:!0,user:e.user,mode:"portfolio"}})),e.user&&a.getUserStocks(e.user.id)},a.getUserStocks=function(e){fetch("http://localhost:3001/users/".concat(e)).then((function(e){return e.json()})).then((function(e){a.setState((function(t,a){return{stocks:e.stocks,portfolioCost:e.portfolio_cost,portfolioCurrentValue:e.portfolio_current_value}}))}))},a.handleLogout=function(){a.setState({isLoggedIn:!1,user:{}})},a.state={isLoggedIn:!1,user:{},mode:"",stocks:[],portfolioCost:0,portfolioCurrentValue:0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loginStatus()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"wrapper"},r.a.createElement(p.a,null,r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/login",render:function(t){return r.a.createElement(O,Object.assign({},t,{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn}))}}),r.a.createElement(g.a,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(N,Object.assign({},t,{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn}))}}),r.a.createElement(g.a,{path:"/",render:function(t){return r.a.createElement(k,Object.assign({},t,e.state,{handleLogout:e.handleLogout,userobj:e.state.user,setMode:e.setMode,modeStatus:e.state.mode,loggedInStatus:e.state.isLoggedIn}))}}))))}}]),t}(n.Component);l.a.render(r.a.createElement(L,null),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.49093f22.chunk.js.map